<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        
        <meta charset="UTF-8">
        <title>Broker Topology | Fabric8 Documentation</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="fabric8io">
        <meta name="description" content="Fabric8 User Guide and Reference Documentation">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./brokerClients.html" />
        
        
        <link rel="prev" href="./activemq.html" />
        

        <meta property="og:title" content="Broker Topology | Fabric8 Documentation">
        <meta property="og:site_name" content="Fabric8 Documentation">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/fabric8io">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
        
    </head>
    <body>
        
        

        <link rel="stylesheet" href="gitbook/style.css">
        

    
    <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-anchors/plugin.css">
    


        
    <div class="book" data-github="fabric8io/fabric8" data-level="7.1.1" data-basepath="." data-revision="1416646234251">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="http://fabric8.io/" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/fabric8io/fabric8/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/fabric8io/fabric8/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Fabric8 Documentation</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="http://fabric8.io/docs/index.html" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/fabric8io/fabric8/issues?milestone=none&amp;state=closed" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="http://fabric8.io/contributing/index.html" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="overview.html">
            
            <a href="./overview.html">
                <i class="fa fa-check"></i> <b>1.</b> Overview
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="getStarted.html">
            
            <a href="./getStarted.html">
                <i class="fa fa-check"></i> <b>2.</b> Get Started
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="quickstarts.html">
            
            <a href="./quickstarts.html">
                <i class="fa fa-check"></i> <b>2.1.</b> QuickStarts
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="environmentVariables.html">
            
            <a href="./environmentVariables.html">
                <i class="fa fa-check"></i> <b>2.2.</b> Environment Variables
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="developer.html">
            
            <a href="./developer.html">
                <i class="fa fa-check"></i> <b>3.</b> Developing
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="developer.html">
            
            <a href="./developer.html">
                <i class="fa fa-check"></i> <b>3.1.</b> Workflow
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="mavenPlugin.html">
            
            <a href="./mavenPlugin.html">
                <i class="fa fa-check"></i> <b>3.2.</b> Maven Plugin
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="debugging.html">
            
            <a href="./debugging.html">
                <i class="fa fa-check"></i> <b>3.3.</b> Debugging
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="arquillian.html">
            
            <a href="./arquillian.html">
                <i class="fa fa-check"></i> <b>3.4.</b> Arquillian
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="continuousDeployment.html">
            
            <a href="./continuousDeployment.html">
                <i class="fa fa-check"></i> <b>3.5.</b> Continuous Deployment
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="migration.html">
            
            <a href="./migration.html">
                <i class="fa fa-check"></i> <b>3.6.</b> Migration
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="architecture.html">
            
            <a href="./architecture.html">
                <i class="fa fa-check"></i> <b>4.</b> Architecture
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="registry.html">
            
            <a href="./registry.html">
                <i class="fa fa-check"></i> <b>4.1.</b> Registry
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="profiles.html">
            
            <a href="./profiles.html">
                <i class="fa fa-check"></i> <b>4.2.</b> Profiles
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="agent.html">
            
            <a href="./agent.html">
                <i class="fa fa-check"></i> <b>4.3.</b> Agent
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="git.html">
            
            <a href="./git.html">
                <i class="fa fa-check"></i> <b>4.4.</b> Git
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="mavenProxy.html">
            
            <a href="./mavenProxy.html">
                <i class="fa fa-check"></i> <b>4.5.</b> Maven Proxy
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="containers.html">
            
            <a href="./containers.html">
                <i class="fa fa-check"></i> <b>5.</b> Containers
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="childContainers.html">
            
            <a href="./childContainers.html">
                <i class="fa fa-check"></i> <b>5.1.</b> Child Containers
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="microServices.html">
            
            <a href="./microServices.html">
                <i class="fa fa-check"></i> <b>5.2.</b> Micro Services
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="javaContainer.html">
            
            <a href="./javaContainer.html">
                <i class="fa fa-check"></i> <b>5.3.</b> Java Container
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="processContainer.html">
            
            <a href="./processContainer.html">
                <i class="fa fa-check"></i> <b>5.4.</b> Process Container
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="springBootContainer.html">
            
            <a href="./springBootContainer.html">
                <i class="fa fa-check"></i> <b>5.5.</b> Spring Boot Container
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="docker.html">
            
            <a href="./docker.html">
                <i class="fa fa-check"></i> <b>5.6.</b> Docker
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="kubernetes.html">
            
            <a href="./kubernetes.html">
                <i class="fa fa-check"></i> <b>5.7.</b> Kubernetes
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="sshContainers.html">
            
            <a href="./sshContainers.html">
                <i class="fa fa-check"></i> <b>5.8.</b> SSH Containers
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="openshift.html">
            
            <a href="./openshift.html">
                <i class="fa fa-check"></i> <b>5.9.</b> OpenShift
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="cloudContainers.html">
            
            <a href="./cloudContainers.html">
                <i class="fa fa-check"></i> <b>5.10.</b> Cloud Containers
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="features.html">
            
            <a href="./features.html">
                <i class="fa fa-check"></i> <b>6.</b> Features
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="gateway.html">
            
            <a href="./gateway.html">
                <i class="fa fa-check"></i> <b>6.1.</b> Gateway
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="requirements.html">
            
            <a href="./requirements.html">
                <i class="fa fa-check"></i> <b>6.2.</b> Auto Scaling
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="rollingUpgrade.html">
            
            <a href="./rollingUpgrade.html">
                <i class="fa fa-check"></i> <b>6.3.</b> Rolling Upgrade
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="osgiResolver.html">
            
            <a href="./osgiResolver.html">
                <i class="fa fa-check"></i> <b>6.4.</b> OSGi Resolver
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="offlineRepo.html">
            
            <a href="./offlineRepo.html">
                <i class="fa fa-check"></i> <b>6.5.</b> Offline Repository
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="partition.html">
            
            <a href="./partition.html">
                <i class="fa fa-check"></i> <b>6.6.</b> Partition
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="processManager.html">
            
            <a href="./processManager.html">
                <i class="fa fa-check"></i> <b>6.7.</b> Process Manager
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="security.html">
            
            <a href="./security.html">
                <i class="fa fa-check"></i> <b>6.8.</b> Security
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="propertyResolver.html">
            
            <a href="./propertyResolver.html">
                <i class="fa fa-check"></i> <b>6.9.</b> Property Resolver
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.10" data-path="urlHandlers.html">
            
            <a href="./urlHandlers.html">
                <i class="fa fa-check"></i> <b>6.10.</b> URL Handlers
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.11" data-path="insight.html">
            
            <a href="./insight.html">
                <i class="fa fa-check"></i> <b>6.11.</b> Insight
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="technologies.html">
            
            <a href="./technologies.html">
                <i class="fa fa-check"></i> <b>7.</b> Technologies
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="activemq.html">
            
            <a href="./activemq.html">
                <i class="fa fa-check"></i> <b>7.1.</b> Apache ActiveMQ
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="brokerTopology.html">
            
            <a href="./brokerTopology.html">
                <i class="fa fa-check"></i> <b>7.1.1.</b> Broker Topology
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="brokerClients.html">
            
            <a href="./brokerClients.html">
                <i class="fa fa-check"></i> <b>7.1.2.</b> Broker Clients
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="camel.html">
            
            <a href="./camel.html">
                <i class="fa fa-check"></i> <b>7.2.</b> Apache Camel
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.2.1" data-path="dataTransform.html">
            
            <a href="./dataTransform.html">
                <i class="fa fa-check"></i> <b>7.2.1.</b> Data Transform
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2.2" data-path="camelEndpointAmq.html">
            
            <a href="./camelEndpointAmq.html">
                <i class="fa fa-check"></i> <b>7.2.2.</b> amq: endpoint
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2.3" data-path="camelEndpointFabric.html">
            
            <a href="./camelEndpointFabric.html">
                <i class="fa fa-check"></i> <b>7.2.3.</b> fabric: endpoint
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2.4" data-path="camelEndpointMaster.html">
            
            <a href="./camelEndpointMaster.html">
                <i class="fa fa-check"></i> <b>7.2.4.</b> master: endpoint
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="cxf.html">
            
            <a href="./cxf.html">
                <i class="fa fa-check"></i> <b>7.3.</b> Apache CXF
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.3.1" data-path="cxfFabric.html">
            
            <a href="./cxfFabric.html">
                <i class="fa fa-check"></i> <b>7.3.1.</b> CXF Fabric
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="spring.html">
            
            <a href="./spring.html">
                <i class="fa fa-check"></i> <b>7.4.</b> Spring framework
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="FAQ.html">
            
            <a href="./FAQ.html">
                <i class="fa fa-check"></i> <b>8.</b> FAQ
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="faqGeneral.html">
            
            <a href="./faqGeneral.html">
                <i class="fa fa-check"></i> <b>8.1.</b> General Questions
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="faqUsing.html">
            
            <a href="./faqUsing.html">
                <i class="fa fa-check"></i> <b>8.2.</b> Questions On Using Fabric8
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="faqConfig.html">
            
            <a href="./faqConfig.html">
                <i class="fa fa-check"></i> <b>8.3.</b> Configuration Questions
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="faqIssues.html">
            
            <a href="./faqIssues.html">
                <i class="fa fa-check"></i> <b>8.4.</b> Known Issues
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.4.1" data-path="faqOsgi.html">
            
            <a href="./faqOsgi.html">
                <i class="fa fa-check"></i> <b>8.4.1.</b> Questions on OSGi and Fabric8
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 73.6842105263158%;min-width: 71.9298245614035%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./overview.html" title="Overview" class="chapter done new-chapter" data-progress="1" style="left: 1.7543859649122806%;"></a>
    
        <a href="./getStarted.html" title="Get Started" class="chapter done new-chapter" data-progress="2" style="left: 3.508771929824561%;"></a>
    
        <a href="./quickstarts.html" title="QuickStarts" class="chapter done " data-progress="2.1" style="left: 5.2631578947368425%;"></a>
    
        <a href="./environmentVariables.html" title="Environment Variables" class="chapter done " data-progress="2.2" style="left: 7.017543859649122%;"></a>
    
        <a href="./developer.html" title="Workflow" class="chapter done " data-progress="3.1" style="left: 8.771929824561404%;"></a>
    
        <a href="./mavenPlugin.html" title="Maven Plugin" class="chapter done " data-progress="3.2" style="left: 10.526315789473685%;"></a>
    
        <a href="./debugging.html" title="Debugging" class="chapter done " data-progress="3.3" style="left: 12.280701754385966%;"></a>
    
        <a href="./arquillian.html" title="Arquillian" class="chapter done " data-progress="3.4" style="left: 14.035087719298245%;"></a>
    
        <a href="./continuousDeployment.html" title="Continuous Deployment" class="chapter done " data-progress="3.5" style="left: 15.789473684210526%;"></a>
    
        <a href="./migration.html" title="Migration" class="chapter done " data-progress="3.6" style="left: 17.54385964912281%;"></a>
    
        <a href="./architecture.html" title="Architecture" class="chapter done new-chapter" data-progress="4" style="left: 19.29824561403509%;"></a>
    
        <a href="./registry.html" title="Registry" class="chapter done " data-progress="4.1" style="left: 21.05263157894737%;"></a>
    
        <a href="./profiles.html" title="Profiles" class="chapter done " data-progress="4.2" style="left: 22.80701754385965%;"></a>
    
        <a href="./agent.html" title="Agent" class="chapter done " data-progress="4.3" style="left: 24.56140350877193%;"></a>
    
        <a href="./git.html" title="Git" class="chapter done " data-progress="4.4" style="left: 26.31578947368421%;"></a>
    
        <a href="./mavenProxy.html" title="Maven Proxy" class="chapter done " data-progress="4.5" style="left: 28.07017543859649%;"></a>
    
        <a href="./containers.html" title="Containers" class="chapter done new-chapter" data-progress="5" style="left: 29.82456140350877%;"></a>
    
        <a href="./childContainers.html" title="Child Containers" class="chapter done " data-progress="5.1" style="left: 31.57894736842105%;"></a>
    
        <a href="./cloudContainers.html" title="Cloud Containers" class="chapter done " data-progress="5.10" style="left: 33.333333333333336%;"></a>
    
        <a href="./microServices.html" title="Micro Services" class="chapter done " data-progress="5.2" style="left: 35.08771929824562%;"></a>
    
        <a href="./javaContainer.html" title="Java Container" class="chapter done " data-progress="5.3" style="left: 36.8421052631579%;"></a>
    
        <a href="./processContainer.html" title="Process Container" class="chapter done " data-progress="5.4" style="left: 38.59649122807018%;"></a>
    
        <a href="./springBootContainer.html" title="Spring Boot Container" class="chapter done " data-progress="5.5" style="left: 40.35087719298246%;"></a>
    
        <a href="./docker.html" title="Docker" class="chapter done " data-progress="5.6" style="left: 42.10526315789474%;"></a>
    
        <a href="./kubernetes.html" title="Kubernetes" class="chapter done " data-progress="5.7" style="left: 43.85964912280702%;"></a>
    
        <a href="./sshContainers.html" title="SSH Containers" class="chapter done " data-progress="5.8" style="left: 45.6140350877193%;"></a>
    
        <a href="./openshift.html" title="OpenShift" class="chapter done " data-progress="5.9" style="left: 47.36842105263158%;"></a>
    
        <a href="./features.html" title="Features" class="chapter done new-chapter" data-progress="6" style="left: 49.12280701754386%;"></a>
    
        <a href="./gateway.html" title="Gateway" class="chapter done " data-progress="6.1" style="left: 50.87719298245614%;"></a>
    
        <a href="./urlHandlers.html" title="URL Handlers" class="chapter done " data-progress="6.10" style="left: 52.63157894736842%;"></a>
    
        <a href="./insight.html" title="Insight" class="chapter done " data-progress="6.11" style="left: 54.3859649122807%;"></a>
    
        <a href="./requirements.html" title="Auto Scaling" class="chapter done " data-progress="6.2" style="left: 56.14035087719298%;"></a>
    
        <a href="./rollingUpgrade.html" title="Rolling Upgrade" class="chapter done " data-progress="6.3" style="left: 57.89473684210526%;"></a>
    
        <a href="./osgiResolver.html" title="OSGi Resolver" class="chapter done " data-progress="6.4" style="left: 59.64912280701754%;"></a>
    
        <a href="./offlineRepo.html" title="Offline Repository" class="chapter done " data-progress="6.5" style="left: 61.40350877192982%;"></a>
    
        <a href="./partition.html" title="Partition" class="chapter done " data-progress="6.6" style="left: 63.1578947368421%;"></a>
    
        <a href="./processManager.html" title="Process Manager" class="chapter done " data-progress="6.7" style="left: 64.91228070175438%;"></a>
    
        <a href="./security.html" title="Security" class="chapter done " data-progress="6.8" style="left: 66.66666666666667%;"></a>
    
        <a href="./propertyResolver.html" title="Property Resolver" class="chapter done " data-progress="6.9" style="left: 68.42105263157895%;"></a>
    
        <a href="./technologies.html" title="Technologies" class="chapter done new-chapter" data-progress="7" style="left: 70.17543859649123%;"></a>
    
        <a href="./activemq.html" title="Apache ActiveMQ" class="chapter done " data-progress="7.1" style="left: 71.9298245614035%;"></a>
    
        <a href="./brokerTopology.html" title="Broker Topology" class="chapter done " data-progress="7.1.1" style="left: 73.6842105263158%;"></a>
    
        <a href="./brokerClients.html" title="Broker Clients" class="chapter  " data-progress="7.1.2" style="left: 75.43859649122807%;"></a>
    
        <a href="./camel.html" title="Apache Camel" class="chapter  " data-progress="7.2" style="left: 77.19298245614036%;"></a>
    
        <a href="./dataTransform.html" title="Data Transform" class="chapter  " data-progress="7.2.1" style="left: 78.94736842105263%;"></a>
    
        <a href="./camelEndpointAmq.html" title="amq: endpoint" class="chapter  " data-progress="7.2.2" style="left: 80.70175438596492%;"></a>
    
        <a href="./camelEndpointFabric.html" title="fabric: endpoint" class="chapter  " data-progress="7.2.3" style="left: 82.45614035087719%;"></a>
    
        <a href="./camelEndpointMaster.html" title="master: endpoint" class="chapter  " data-progress="7.2.4" style="left: 84.21052631578948%;"></a>
    
        <a href="./cxf.html" title="Apache CXF" class="chapter  " data-progress="7.3" style="left: 85.96491228070175%;"></a>
    
        <a href="./cxfFabric.html" title="CXF Fabric" class="chapter  " data-progress="7.3.1" style="left: 87.71929824561404%;"></a>
    
        <a href="./spring.html" title="Spring framework" class="chapter  " data-progress="7.4" style="left: 89.47368421052632%;"></a>
    
        <a href="./FAQ.html" title="FAQ" class="chapter  new-chapter" data-progress="8" style="left: 91.2280701754386%;"></a>
    
        <a href="./faqGeneral.html" title="General Questions" class="chapter  " data-progress="8.1" style="left: 92.98245614035088%;"></a>
    
        <a href="./faqUsing.html" title="Questions On Using Fabric8" class="chapter  " data-progress="8.2" style="left: 94.73684210526316%;"></a>
    
        <a href="./faqConfig.html" title="Configuration Questions" class="chapter  " data-progress="8.3" style="left: 96.49122807017544%;"></a>
    
        <a href="./faqIssues.html" title="Known Issues" class="chapter  " data-progress="8.4" style="left: 98.24561403508773%;"></a>
    
        <a href="./faqOsgi.html" title="Questions on OSGi and Fabric8" class="chapter  " data-progress="8.4.1" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_8">
                    
                        <h2 id="broker-topology"><a name="broker-topology" class="anchor" href="#broker-topology"><span class="fa fa-link"></span></a>Broker Topology</h2>
<p>Fabric8 allows you to easily define <a href="http://www.jboss.org/products/amq" target="_blank">A-MQ message broker topologies</a> either via the command line, JMX or via the Fuse Management Console.</p>
<p>Firstly brokers are put into logical groups. A logical group is then used for discovery. So messaging clients just connect to a group &amp; they don&apos;t care which broker in the group they connect to.</p>
<p>There are a few different ways to configure Logical Brokers which map to 1 or more physical brokers.</p>
<h3 id="a-master-slave-broker"><a name="a-master-slave-broker" class="anchor" href="#a-master-slave-broker"><span class="fa fa-link"></span></a>A. Master / Slave Broker</h3>
<p>In master slave we create a logical broker in a group. e.g. group A, broker1 and broker2.</p>
<p>Now we&apos;ve 2 logical brokers. Each of these 2 logical brokers gets a Fabric profile. We can run 1 or more instances of each.</p>
<p>If we run 2 instances of broker1 profile in 2 separate containers; one is the master the other is the slave (with failover).</p>
<h3 id="b-replicated-broker"><a name="b-replicated-broker" class="anchor" href="#b-replicated-broker"><span class="fa fa-link"></span></a>B. Replicated Broker</h3>
<p>In replicated mode you run N replicas of the same logical broker. Typically you&apos;d run, say, 3 replicas; typically inheriting from the <strong>mq-replicated</strong> profile.</p>
<p>So you&apos;d have 1 profile for a replica set of brokers and you deploy 3 instances of that container.</p>
<h3 id="c-n-1-broker"><a name="c-n-1-broker" class="anchor" href="#c-n-1-broker"><span class="fa fa-link"></span></a>C. N + 1 Broker</h3>
<p>In N + 1 you define N brokers (broker name and configurations) in a group. e.g. group A has broker1 and broker2. Then you create N+1 containers each having all the N brokers inside.</p>
<p>This maps to a single profile for the N+1 group, which contains broker1 and broker2; then you&apos;d run 3 of these containers; with 2 of the containers being master and one being slave to the other 2 brokers.</p>
<p>The <strong>standby.group</strong> (which defaults to the group) is used to ensure that each container is only master of 1 logical broker; to avoid running 3 containers and 1 of them being master of both broker1 and broker2</p>
<h3 id="store-and-forward-networks"><a name="store-and-forward-networks" class="anchor" href="#store-and-forward-networks"><span class="fa fa-link"></span></a>Store and forward networks</h3>
<p>Store and forward networks are excellent way to connect geographically dispersed brokers. You can have a broker group for the US east region and another group for US west region. Then clients can connect to their local broker, but we still can pass messages between
 regions through store and forward network. We can easily network brokers from different groups, by defining the <strong>networks</strong> property in the profile.</p>
<h3 id="implementation-details"><a name="implementation-details" class="anchor" href="#implementation-details"><span class="fa fa-link"></span></a>Implementation details</h3>
<p>Each logical Master/Slave broker, Replicated broker set, or N + 1 group of brokers maps to a Profile in Fabric. Each will have a single broker inside the profile configuration - apart from (C) N+1 Broker which will have N broker configurations.</p>
<p>Broker configurations are defined by the file: <strong>io.fabric8.mq.fabric.server-$brokerName.properties</strong> inside the profile</p>
<h3 id="using-mq-create"><a name="using-mq-create" class="anchor" href="#using-mq-create"><span class="fa fa-link"></span></a>Using mq-create</h3>
<p>There follows examples on how to create each of the 3 kinds of broker configurations using the comand line shell:</p>
<h4 id="master-slave"><a name="master-slave" class="anchor" href="#master-slave"><span class="fa fa-link"></span></a>Master / Slave</h4>
<p>Lets create a logical broker in group <em>a</em> and have a master and slave</p>
<pre><code>mq-create --group a broker1

container-create-child --profile mq-a-broker1 root broker1c1
container-create-child --profile mq-a-broker1 root broker1c2
</code></pre><h4 id="replicated"><a name="replicated" class="anchor" href="#replicated"><span class="fa fa-link"></span></a>Replicated</h4>
<p>Lets create a logical broker in group <em>a</em> with a logical broker1 replicated in 3 replicas</p>
<pre><code>mq-create --parent-profile=mq-replicated --group a broker1

container-create-child --profile mq-a-broker1 root broker1c1
container-create-child --profile mq-a-broker1 root broker1c2
container-create-child --profile mq-a-broker1 root broker1c3
</code></pre><h4 id="n-1-with-2-brokers"><a name="n-1-with-2-brokers" class="anchor" href="#n-1-with-2-brokers"><span class="fa fa-link"></span></a>N+1 with 2 brokers</h4>
<p>Lets create a logical broker in group <em>a</em> and have a master and slave</p>
<pre><code>mq-create --profile broker1and2 --group a broker1
mq-create --profile broker1and2 --group a broker2

container-create-child --profile broker1and2 root brokerc1
container-create-child --profile broker1and2 root brokerc2
container-create-child --profile broker1and2 root brokerc3
</code></pre><h4 id="try-them-all-out"><a name="try-them-all-out" class="anchor" href="#try-them-all-out"><span class="fa fa-link"></span></a>Try them all out</h4>
<p>Copy/paste this example script to setup 3 profiles with a group each showing all the above in a demo:</p>
<pre><code>mq-create --group a --profile mq-a.masterSlave broker1
mq-create --group b --profile mq-b.replicated --parent-profile=mq-replicated broker2
mq-create --group c --profile mq-c.n.plus.1 broker3
mq-create --group c --profile mq-c.n.plus.1 broker4
</code></pre><p>Then you&apos;ll have 3 profiles created, mq-a.masterSlave,  mq-b.replicated and mq-c.n.plus.1 which show master/slave, replicated, N+1 options with a profile for each.</p>
<p>So you&apos;re console should look like this (notice the scale column shows how many container instances are required for each profile).</p>
<p><img src="images/broker-requirements.png" alt="hawtio screenshot"></p>
<ul>
<li>clicking on the red badges on the right then lets you create containers.</li>
<li>clicking on the Scale button on the toolbar will let you scale up/down the number of instances of each logical broker</li>
<li>if you run Fabric on a cloud with an Auto-Scaler (like OpenShift) then it will automatically spin up all the brokers for you (neat eh! :)</li>
</ul>
<h4 id="store-and-forward-networks"><a name="store-and-forward-networks" class="anchor" href="#store-and-forward-networks"><span class="fa fa-link"></span></a>Store and forward networks</h4>
<p>To demonstrate networks, we will create a master/slave in two groups <strong>us-east</strong> and <strong>us-west</strong> and connect them</p>
<p><img src="images/mq-network.png" alt="mq network"></p>
<pre><code>mq-create --group us-east --networks us-west --networks-username admin --networks-password admin --create-container us-east us-east
mq-create --group us-west --networks us-east --networks-username admin --networks-password admin --create-container us-west us-west
</code></pre><p>Now we can connect producer to <strong>us-east</strong> cluster</p>
<pre><code>container-create-child --profile mq-client-us-east --profile example-mq-producer root producer
</code></pre><p>and consumer to <strong>us-west</strong> cluster</p>
<pre><code>container-create-child --profile mq-client-us-west --profile example-mq-consumer root consumer
</code></pre><p>and they observe messages being passed through the route.</p>
<h4 id="command-line"><a name="command-line" class="anchor" href="#command-line"><span class="fa fa-link"></span></a>Command Line</h4>
<p>To create a new logical broker configuration use the <strong>mq-create</strong> command.</p>
<pre><code>mq-create nameOfBroker
</code></pre><p>There are many command line options you can type</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./activemq.html" class="navigation navigation-prev " aria-label="Previous page: Apache ActiveMQ"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./brokerClients.html" class="navigation navigation-next " aria-label="Next page: Broker Clients"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
