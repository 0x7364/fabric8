echo Create dummy karaf profile
fabric:profile-create --parents default karaf
fabric:profile-edit --profile karaf --repositories mvn:org.apache.karaf.assemblies.features/standard/${karaf-version}/xml/features
fabric:profile-edit --profile karaf --repositories mvn:org.apache.karaf.assemblies.features/enterprise/${karaf-version}/xml/features
fabric:profile-edit --profile karaf --repositories mvn:org.fusesource.fabric/fuse-fabric/${project.version}/xml/features

echo Create activemq ${activemq-version} profile
fabric:profile-create --parents karaf activemq
fabric:profile-edit --profile activemq --features mq-fabric/${project.version}
zk:create -i -o -r /fabric/configs/versions/1.0/profiles/activemq/activemq.xml mvn:org.fusesource.fabric/fuse-fabric/${project.version}/xml/activemq
fabric:profile-edit --profile activemq --pid org.fusesource.mq.fabric.server-broker1 name=broker1 config=zk:/fabric/configs/versions/1.0/profiles/activemq/activemq.xml data=/tmp/broker1 connectors=openwire group=default standby.pool=default

echo Create camel ${camel-version} profile
fabric:profile-create --parents karaf camel
fabric:profile-edit --profile camel --repositories mvn:org.apache.camel.karaf/apache-camel/${camel-version}/xml/features
fabric:profile-edit --profile camel --features camel-core/${camel-version}
fabric:profile-edit --profile camel --features camel-blueprint/${camel-version}

echo Create nmr 1.4.0 profile
fabric:profile-create --parents karaf nmr
fabric:profile-edit --profile nmr --repositories mvn:org.apache.servicemix.nmr/apache-servicemix-nmr/1.4.0/xml/features
fabric:profile-edit --profile nmr --features nmr/1.4.0

echo Create ServiceMix 4.3.0 profile
fabric:profile-create --parents activemq --parents nmr --parents camel servicemix
fabric:profile-edit --profile servicemix --repositories mvn:org.apache.servicemix/apache-servicemix/4.3.0/xml/features

echo Create Apache Ode profile
fabric:profile-create --parents servicemix ode
fabric:profile-edit --profile ode --repositories mvn:org.apache.ode/ode-jbi-karaf/1.3.5/xml/features

echo Create Hadoop profiles
fabric:profile-create hadoop
fabric:profile-edit --profile hadoop --features fabric-hadoop/${project.version}
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop fs.default.name=hdfs://localhost:9000
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop dfs.replication=1
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop dfs.name.dir=${karaf.data}/hadoop/dfs/name
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop dfs.name.edits.dir=${karaf.data}/hadoop/dfs/name
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop dfs.http.address=localhost:9002
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop dfs.data.dir=${karaf.data}/hadoop/dfs/data
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop mapred.job.tracker=localhost:9001
fabric:profile-edit --profile hadoop --pid org.fusesource.fabric.hadoop
fabric:profile-create --parents hadoop hadoop-namenode
fabric:profile-edit --profile hadoop-namenode --pid org.fusesource.fabric.hadoop nameNode=true
fabric:profile-create --parents hadoop hadoop-datanode
fabric:profile-edit --profile hadoop-datanode --pid org.fusesource.fabric.hadoop dataNode=true
