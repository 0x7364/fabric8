{
  "id": "fabric8mq-config",
  "kind": "Config",
  "apiVersion": "v1beta1",
  "name": "fabric8mq-config",
  "description": "Creates a Fabric8MQ broker",
  "items": [
    {
      "apiVersion": "v1beta1",
      "id": "fabric8mq-service",
      "kind": "Service",
      "port": ${activemq.service.port},
      "selector": {
        "name": "fabricMQ"
      }
    },
    {
      "id": "fabric8MQController",
      "kind": "ReplicationController",
      "apiVersion": "v1beta1",
      "desiredState": {
        "replicas": 1,
        "replicaSelector": {
          "name": "fabricMQ",
          "container": "java",
          "region": "default"
        },
        "podTemplate": {
          "desiredState": {
            "manifest": {
              "version": "v1beta1",
              "id": "fabric8MQPod",
              "containers": [
                {
                  "name": "fabric-mq",
                  "image": "${docker.dataImage}",
                  "ports": [
                    {
                      "containerPort": ${activemq.container.port},
                      "hostPort": ${activemq.host.port}
                    },
                    {
                      "containerPort": 8778,
                      "hostPort": 9600
                    }
                  ],
                  "env": [
                    {
                      "name": "AMQ_PORT",
                      "value": "${activemq.container.port}"
                    }
                  ]
                }
              ]
            }
          },
          "labels": {
            "name": "fabricMQ",
            "container": "java",
            "region": "default"
          }
        }
      },
      "labels": {
        "name": "fabricMQ",
        "container": "java",
        "region": "default"
      }
    }
  ]
}
